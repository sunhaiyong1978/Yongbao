From 3f0b897905b05cf296f1cec00c9e6eb784901325 Mon Sep 17 00:00:00 2001
From: Sun Haiyong <sunhaiyong@zdbr.net>
Date: Sun, 14 Jan 2024 10:40:14 +0000
Subject: [PATCH] external/xmlsec add 0001-xmlsec-fix-build-error.patch.1 file.

---
 .../0001-xmlsec-fix-build-error.patch.1       | 37 +++++++++++++++++++
 external/xmlsec/UnpackedTarball_xmlsec.mk     |  1 +
 2 files changed, 38 insertions(+)
 create mode 100644 external/xmlsec/0001-xmlsec-fix-build-error.patch.1

diff --git a/external/xmlsec/0001-xmlsec-fix-build-error.patch.1 b/external/xmlsec/0001-xmlsec-fix-build-error.patch.1
new file mode 100644
index 000000000..4c691c711
--- /dev/null
+++ b/external/xmlsec/0001-xmlsec-fix-build-error.patch.1
@@ -0,0 +1,37 @@
+From 040bff32a92458beb423b79f2271a6e52a57228c Mon Sep 17 00:00:00 2001
+From: Sun Haiyong <sunhaiyong@zdbr.net>
+Date: Tue, 21 Nov 2023 01:24:13 +0000
+Subject: [PATCH] xmlsec fix build error.
+
+---
+ include/xmlsec/nss/app.h | 1 +
+ include/xmlsec/xmlsec.h  | 1 +
+ 2 files changed, 2 insertions(+)
+
+diff --git a/include/xmlsec/nss/app.h b/include/xmlsec/nss/app.h
+index ae94c80..73949b2 100644
+--- a/include/xmlsec/nss/app.h
++++ b/include/xmlsec/nss/app.h
+@@ -12,6 +12,7 @@
+ 
+ #include <nspr.h>
+ #include <nss.h>
++#include <nss/seccomon.h>
+ 
+ #include <xmlsec/exports.h>
+ #include <xmlsec/xmlsec.h>
+diff --git a/include/xmlsec/xmlsec.h b/include/xmlsec/xmlsec.h
+index 3084a7e..b757d93 100644
+--- a/include/xmlsec/xmlsec.h
++++ b/include/xmlsec/xmlsec.h
+@@ -12,6 +12,7 @@
+ #define __XMLSEC_H__
+ 
+ #include <libxml/tree.h>
++#include <libxml/parser.h>
+ 
+ #include <xmlsec/version.h>
+ #include <xmlsec/exports.h>
+-- 
+2.31.1
+
diff --git a/external/xmlsec/UnpackedTarball_xmlsec.mk b/external/xmlsec/UnpackedTarball_xmlsec.mk
index 77d3386b2..643ef57ba 100644
--- a/external/xmlsec/UnpackedTarball_xmlsec.mk
+++ b/external/xmlsec/UnpackedTarball_xmlsec.mk
@@ -10,6 +10,7 @@
 xmlsec_patches :=
 # Remove this when Ubuntu 20.04 is EOL in 2025.
 xmlsec_patches += old-nss.patch.1
+xmlsec_patches += 0001-xmlsec-fix-build-error.patch.1
 
 $(eval $(call gb_UnpackedTarball_UnpackedTarball,xmlsec))
 
-- 
2.31.1

